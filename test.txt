#include<iostream>
#include<string>            
#include<iomanip>              //控制字符长度setw（）
using namespace std;
//学生数组
struct student
{
	string name;
	int code;  //学号
	int age;
	string sex;
	int score;
};
struct student a[50];
//全局声明
void HomePage();
void addnew();  
void SearchStu();
void Showall(); 
void Delete(int i);
void ReviseStu(int i);
void SortScore();
int j;
//主函数
int main()
{
	HomePage();//打开首页 
	return 0;
}
//首页
void HomePage()
{
	char d;
	do{
		cout << "    ★☆★☆★☆★☆★☆★☆★☆★☆★☆☆★☆★☆★☆★☆★☆★☆★☆★☆★" << endl;
		cout << "    ★☆\t\t\t\t\t\t\t\t☆★" << endl;
		cout << "    ★☆\t\t\t学生信息管理系统              \t\t☆★" << endl;
		cout << "    ★☆\t\t\t\t\t\t\t\t☆★" << endl;
		cout << "    ★☆\t1.查找修改学生信息         2.显示所有学生信息\t\t☆★" << endl;
		cout << "    ★☆\t3.添加某个学生信息         4.学生成绩进行排序\t\t☆★" << endl;
		cout << "    ★☆\t\t\t\t\t\t\t\t☆★" << endl;
		cout << "    ★☆\t\t    输入数字按回车键确定选择\t\t\t☆★" << endl;
		cout << "    ★☆\t\t\t\t\t\t\t\t☆★" << endl;
		cout << "    ★☆★☆★☆★☆★☆★☆★☆★☆★☆☆★☆★☆★☆★☆★☆★☆★☆★☆★" << endl;
		int a;
		cin >> a;
		switch (a)
		{
		case 1:SearchStu(); break;
		case 2:Showall(); break;
		case 3:addnew(); break;
		case 4:SortScore(); break;
		default:cout << "error" << endl; break;
		}
		cout << "输入Y继续，任意键退出";
		cin >> d;
	} while (d == 'Y');
}      
//录入函数
void addnew() 
{
	cout << "输入添加学生信息的人数" << endl;
	cin >> j;
	for ( int i = 1; i <= j; i++)
	{
		cout << "请输入学生的名字：";
			cin >> a[i].name;
		cout << "请输入学生的学号:";
			cin >> a[i].code; 
		cout << "请输入学生的年龄:";
			cin >> a[i].age;
		cout << "请输入学生的性别:";
			cin >> a[i].sex;
		cout << "请输入学生的成绩:";
			cin >> a[i].score;
		cout << "第" << i << "个学生输入完成" << endl;
		cout << endl;
	}
	cout << "录入完毕。";
}
//查找函数
void SearchStu()
{
	int find(int code);
	void output(int i);
	cout << "输入学生学号进行查找" << endl;
	int code;
	cin >> code;
	int i = find(code);
	if (-1 == i)
	{
		cout << "没有此人" << endl;
	}
	output(i);
}
int find(int code)
{
	for (int i = 0; i < 50; i++)
	{
		if (a[i].code == code)
		{
			return i;
		}
	}
	return -1;
}
void output(int i)
{
	char b;
	cout << "姓名 " << a[i].name << "   ";
	cout << "学号 " << a[i].code << "   ";
	cout << "年龄 " << a[i].age << "   ";
	cout << "性别 " << a[i].sex << "   ";
	cout << "成绩" << a[i].score << "" << endl;
	cout << "如果要进行修改，请输入R，按任意键返回。" << endl;
	cin >> b;
	if (b == 'R')  ReviseStu(i);
}
//显示所有学生信息
void Showall()
{
	cout << setiosflags(ios::left);      //左对齐
	cout << setw(5) << "姓名";
	cout << setw(5) << "学号";
	cout << setw(5) << "年龄";
	cout << setw(5) << "性别";
	cout << setw(5) << "成绩" << endl;
	for (int e = 1; e <= j; e++)
	{
		cout << setiosflags(ios::left);
		cout << setw(5)<<a[e].name;
		cout << setw(5)<< a[e].code;
		cout << setw(5)<<a[e].age;
		cout << setw(5) << a[e].sex;
		cout << setw(5)<<a[e].score << endl;
	}
}
//修改信息函数
void ReviseStu(int i)
{
	int c;
	cout << "1.姓名修改  2.学号修改  3。年龄修改  4。性别修改  5。成绩修改  6.删除" << endl;
	cin >> c;
	if (1==c )
	{
		cout << "请输入修改后的名字" << endl;
		string name;
		cin >> name;
		a[i].name = name;
	}
	if (2 == c)
	{
		cout << "请输入修改后的学号" << endl;
		int code;
		cin >> code;
		a[i].code = code;
	}
	if (3 == c)
	{
		cout << "请输入修改后的年龄" << endl;
		int age;
		cin >> age;
		a[i].age = age;
	}
	if (4 == c)
	{
		cout << "请输入修改后的性别" << endl;
		string sex;
		cin >> sex;
		a[i].sex = sex;
	}
	if (5 == c)
	{
		cout << "请输入修改后的成绩" << endl;
		int score;
		cin >> score;
		a[i].score = score;
	}
	if (6 == c)
	{
		Delete(i);
		cout << "删除成功" << endl;
	}
}
//删除函数
void Delete(int i)
{
	for (; i <= j; i++) 
	{
		a[i] = a[i + 1];
	}
}
//成绩排序函数
void SortScore()
{
	int temp;
	for (int i = 1; i <= j; i++)
	{
		for (int m = 1; m <= j - i; m++)
		{
			if (a[i].score < a[i + 1].score)
			{
				temp = a[i].score;
				a[i].score = a[i + 1].score;
				a[i + 1].score = temp;
			}
		}
	}
	cout << setiosflags(ios::left);
	cout << setw(5) << "姓名 " << setw(5) << "成绩";
	cout << endl;
	for (int i = 1; i <= j; i++)
	{
		cout << setiosflags(ios::left);
		cout << setw(5) << a[i].name << setw(5) << a[i].score;
		cout << endl;
	}
}

